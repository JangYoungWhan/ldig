<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<title>ldig server</title>
</head>
<body>

<textarea id="detectText" cols="40" rows="4">
I am a pen.
</textarea>
<input id="detectButton" type="button" value="detect"/>

<table id="probTable">
<thead id="probHead"></thead>
<tbody id="probBody"></tbody>
</table>

<table id="featTable">
<thead id="featHead"></thead>
<tbody id="featBody"></tbody>
</table>


<script lang="text/javascript">
$(document).ready(function() { 
	$("#detectButton").click(function(){
		$.getJSON('/detect?text=' + encodeURIComponent($("#detectText").val()), function(obj, textStatus, jqXHR){
			var data = obj["data"];
			var labels = obj["labels"];
			var prob = obj["prob"];

			var feathead = $("<tr/>")
			$("#featHead").empty().append(feathead);
			var probhead = $("<tr/>")
			$("#probHead").empty().append(probhead);
			var probbody = $("<tr/>")
			$("#probBody").empty().append(probbody);

			feathead.append($("<th/>").text("id"));
			feathead.append($("<th/>").text("text"));
			for (var i=0;i<labels.length;++i) {
				feathead.append($("<th/>").text(labels[i]));
				probhead.append($("<th/>").text(labels[i]));
				probbody.append($("<td/>").text(prob[i]));
			}

			var body = $("#featBody").empty();
			for (var j=0;j<data.length;++j) {
				var item = data[j];
				var col = $("<tr/>")
				body.append(col);
				col.append($("<td/>").text(item["id"]));
				col.append($("<td/>").text("'" + item["feature"] + "'"));
				var phi = item["phi"];
				for (var i=0;i<phi.length;++i) {
					col.append($("<td/>").text(phi[i]=="0.000"?"":phi[i]));
				}
			}
		});
	});
});
</script>


</body>
</html>
